(window.webpackJsonp=window.webpackJsonp||[]).push([[156],{270:function(e,t,n){"use strict";n.r(t);var o=n(272),r=n.n(o),d={name:"CodeMirrorComponent",props:{code:{type:String,default:""}},components:{},data:function(){return{scriptCode:"",codeResult:""}},mounted:function(){this.scriptCode=this.code},methods:{onCmReady:function(e){console.log("the editor is readied!",e)},onCmFocus:function(e){console.log("the editor is focus!",e)},onScriptClick:function(){try{var e=new r.a;e.setText(this.scriptCode);var t=document.createElement("div"),n=this.$refs.codeMirrorContent;n.innerHTML="",n.appendChild(t),e.swapWithElement(t),this.codeResult="";var o={log:function(e){var line=document.createElement("div");line.appendChild(document.createTextNode(e)),n.appendChild(line)}};e.runInContext({console:o},(function(e,t){if(t){var line=document.createElement("div");line.appendChild(document.createTextNode(t)),n.appendChild(line)}})),e.destroy()}catch(e){console.log(e)}},onCodeChange:function(e){this.scriptCode=e}}},c=n(22),component=Object(c.a)(d,(function(){var e=this,t=e._self._c;return t("div",[t("no-ssr",{attrs:{placeholder:"Codemirror Loading..."}},[t("div",{attrs:{align:"right"}},[t("button",{staticClass:"brook-btn bk-btn-pink",on:{click:function(t){e.scriptCode=""}}},[e._v("\n        입력 스크립트 Clear\n      ")]),e._v(" "),t("button",{staticClass:"brook-btn bk-btn-theme",on:{click:e.onScriptClick}},[e._v("\n      입력 스크립트 Run\n        ")])]),e._v(" "),t("codemirror",{attrs:{value:e.scriptCode},on:{input:function(t){return e.onCodeChange(t)}}}),e._v(" "),t("b-card",{staticClass:"bk-accordion-style--2"},[t("b-card-header",[t("div",{staticClass:"acc-btn"},[e._v("\n          결과창\n        ")])]),e._v(" "),t("b-collapse",{attrs:{visible:""}},[t("b-card-body",[t("b-card-text",[t("div",{ref:"codeMirrorContent"})])],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports},272:function(e,t,n){"use strict";const o=n(75),{createContextEval:r}=n(279);function d(){this.editor=this.createEditor(),this.runningEvalContext=void 0}n(131),d.prototype.createEditor=function(){return this.textareaHolder=document.createElement("div"),this.textarea=document.createElement("textarea"),this.textareaHolder.appendChild(this.textarea),o.fromTextArea(this.textarea)},d.prototype.setText=function(e){this.editor.setValue(e)},d.prototype.getText=function(){return this.editor.getValue()},d.prototype.swapWithElement=function(element){this.originalElemenet=element,element.parentNode.replaceChild(this.textareaHolder,element),this.editor.refresh()},d.prototype.destroy=function(){if(null==this.originalElemenet)throw new Error("Haven't `originalElement` : You have to call #swapWithElement before call this");this.textareaHolder.parentNode.replaceChild(this.originalElemenet,this.textareaHolder),this.originalElemenet=null,this.textarea=null,this.textareaHolder=null,this.editor=null,this.runningEvalContext&&this.runningEvalContext.remove(),Object.freeze(this)},d.prototype.runInContext=async function(e,t={}){this.runningEvalContext&&this.runningEvalContext.remove();const n=this.editor.getValue();return this.runningEvalContext=r(),this.runningEvalContext.run(n,e,t)},e.exports=d},279:function(e,t){function n(){return Array.from(crypto.getRandomValues(new Uint32Array(4))).map((e=>e.toString(36))).join("")}e.exports.createContextEval=function(){const iframe=document.createElement("iframe");iframe.setAttribute("style","display: none;");const e=n(),t=n();return{remove:()=>{document.body.removeChild(iframe)},run:(n,o={},r={})=>new Promise(((d,c)=>{const l=o=>{if(o.source!==iframe.contentWindow)return;const{id:r,result:h,error:m,ready:v}=o.data||{};r===e&&(v?iframe.contentWindow.postMessage({id:t,src:n},"*"):(m?c(new Error(m.message)):d(h),window.removeEventListener("message",l)))};window.addEventListener("message",l);const h=r.type?r.type:"script";iframe.srcdoc=(({origin:e,senderId:t,receiverId:n,type:o})=>"script"===o?'<!doctype html>\n<html lang="en">\n<body></body>\n</html>':`<!doctype html>\n<html lang="en">\n<body>\n<script>\nconst origin = "${e}";\nconst senderId = "${t}";\nconst receiverId = "${n}";\nconst handleMessage = async (event) => {\n  if (event.source !== window.parent) {\n    return;\n  }\n  if (event.origin !== origin) {\n    return;\n  }\n  const { id, src } = event.data || {};\n  if (id !== receiverId) {\n    return;\n  }\n  try {\n    const AsyncFunction = Object.getPrototypeOf(async function () {}).constructor;\n    ${"module"===o?"await import(`data:text/javascript;charset=utf-8, ${encodeURIComponent(src)}`);window.parent.postMessage({ id: senderId, result: undefined }, origin);":"AsyncFunction"===o?"await new AsyncFunction(src)();window.parent.postMessage({ id: senderId, result: undefined }, origin);":"const result = eval(src);window.parent.postMessage({ id: senderId, result }, origin);"};\n  } catch (error) {\n    window.parent.postMessage({ id: senderId, error: {message:error.message} }, origin);\n  }\n  window.removeEventListener("message", handleMessage);\n};\nwindow.addEventListener("message", handleMessage);\nwindow.parent.postMessage({ id: senderId, ready: true }, origin);\n<\/script>\n</body>\n</html>`)({origin:window.location.origin,senderId:e,receiverId:t,type:h}),document.body.appendChild(iframe);const m=iframe.contentWindow;if(Object.keys(o).forEach((function(e){m[e]=o[e]})),"script"===h)try{d(m.eval(n))}catch(e){c(e)}}))}}}}]);